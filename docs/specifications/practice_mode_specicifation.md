# システム仕様書（練習モード）

## 1. 概要

本機能は、**Grid9English**システムの9マスパネルをインタラクティブな入力インターフェースとして活用し、ユーザーが各要素（動詞タイプ、文の種類、主語、時制）を選択するたびに、それに対応する英文のパターンを生成・表示する「練習モード」の仕様を定義します。

## 2. 機能名称

練習モード (Interactive Pattern Practice Mode)

## 3. 機能目標

ユーザーが英文パターンの構成要素を一つずつ選択・確定することで、パターン構築のロジックと、その結果として生まれる英文の出だしを学習・確認できるようにする。

## 4. ユーザーインターフェース (UI) と操作の仕様

このモードでは、以下の4つの要素が操作可能となります。

### 4.1. **動詞タイプ**の選択

| 要素 | UI要素 | 操作 | 動作 |
| :--- | :--- | :--- | :--- |
| **動詞タイプ** | `VerbSelector` (タブ) | タブ（「Do動詞」または「Be動詞」）をクリックする。 | 1. `verbType` のPropsが選択された値に更新される。2. これに基づき、**9マスパネルの表示**が更新される。3. **対応する文章（英文の出だし）**が生成・表示される。 |

### 4.2. **文の種類**の選択

| 要素 | UI要素 | 操作 | 動作 |
| :--- | :--- | :--- | :--- |
| **文の種類** | 9マスパネルの**上段（1行目）**のマスをクリックする。 | マスをクリックする。 | 1. `sentenceType` のPropsがクリックされたマスに対応する値に更新される。2. **上段のアクティブなマス**が切り替わる。3. **対応する文章**が生成・表示される。 |

### 4.3. **主語**の選択

| 要素 | UI要素 | 操作 | 動作 |
| :--- | :--- | :--- | :--- |
| **主語** | 9マスパネルの**中段（2行目）**のマスをクリックする。 | マスをクリックする。 | 1. `subject` のPropsがクリックされたマスに対応する値（例: `first_s`, `third_p`など）に更新される。2. **中段のアクティブなマスと記号**（1, 11, 2, 3, 33）が切り替わる。3. **対応する文章**が生成・表示される。 |

### 4.4. **時制**の選択

| 要素 | UI要素 | 操作 | 動作 |
| :--- | :--- | :--- | :--- |
| **時制** | 9マスパネルの**下段（3行目）**のマスをクリックする。 | マスをクリックする。 | 1. `tense` のPropsがクリックされたマスに対応する値に更新される。2. **下段のアクティブなマス**が切り替わる。3. **対応する文章**が生成・表示される。 |

## 5. 文章生成ロジック

### 5.1. 状態管理

アプリケーションは、以下の4つの要素を合わせた**現在の状態 (Current State)**を保持します。

`Current State` = { `verbType`, `sentenceType`, `subject`, `tense` }

### 5.2. 文章生成 (Text Generation)

ユーザーが要素をクリックし、`Current State` が更新されるたびに、システムは保持している4つの状態の組み合わせに基づき、対応する**英文の出だし（文頭パターン）**をデータベースから検索またはロジックで生成し、画面に表示します。

| Current State | 生成される文章の例 |
| :--- | :--- |
| Do, Question, Third\_s, Present | **Does he** |
| Be, Negative, First\_p, Past | **We weren't** |
| Do, Positive, First\_s, Future | **I will** |

## 6. 実装上の考慮事項

* **状態の初期値:** 練習モード開始時、すべての要素には初期値（例: Do動詞、肯定文、一人称単数、現在形）が設定されている必要があります。
* **非アクティブ操作:** 既にアクティブなマスやタブをクリックした場合、状態は変化せず、文章も再生成されないものとします（または、クリックを無視します）。
