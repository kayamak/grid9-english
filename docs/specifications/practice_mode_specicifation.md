# システム仕様書（練習モード）

## 1. 概要

本機能は、**Grid9English**システムの9マスパネルをインタラクティブな入力インターフェースとして活用し、ユーザーが各要素（動詞タイプ、文の種類、主語、時制、**動詞**）を選択するたびに、それに対応する英文のパターンを生成・表示する「練習モード」の仕様を定義します。

## 2. 機能名称

練習モード (Interactive Pattern Practice Mode)

## 3. 機能目標

ユーザーが英文パターンの構成要素を一つずつ選択・確定することで、パターン構築のロジックと、その結果として生まれる英文の出だしを学習・確認できるようにする。

## 4. ユーザーインターフェース (UI) と操作の仕様

このモードでは、以下の**5つ**の要素が操作可能となります。

### 4.1. **動詞タイプ**の選択

| 要素 | UI要素 | 操作 | 動作 |
| :--- | :--- | :--- | :--- |
| **動詞タイプ** | `VerbTypeSelector` (タブ) | タブ（「Do動詞」または「Be動詞」）をクリックする。 | 1. `verbType` のPropsが選択された値に更新される。2. これに基づき、**9マスパネルの表示**が更新される。3. **対応する文章（英文の出だし）**が生成・表示される。 |

### 4.2. **文型**の選択

| 要素 | UI要素 | 操作 | 動作 | 説明 |
| :--- | :--- | :--- | :--- | :--- |
| **文型** | `fiveSentencePattern` (ラジオボタン) | ラジオボタン（「SV」または「SVO」）を選択する。| 1. `fiveSentencePattern` のPropsが選択されたラジオボタンに対応する値に更新される。2. これに基づき、**9マスパネルの表示**が更新される。3. **対応する文章（英文の出だし）**が生成・表示される。 | 本ラジオボタンは動詞タイプが「Do動詞」のタブの配下のみに表示されるラジオボタンです。動詞タイプタブの直下に表示される文型選択ラジオボタンです|

### 4.3. **文の種類**の選択

| 要素 | UI要素 | 操作 | 動作 |
| :--- | :--- | :--- | :--- |
| **文の種類** | 9マスパネルの**上段（1行目）**のマスをクリックする。 | マスをクリックする。 | 1. `sentenceType` のPropsがクリックされたマスに対応する値に更新される。2. **上段のアクティブなマス**が切り替わる。3. **対応する文章**が生成・表示される。 |

### 4.4. **主語**の選択

| 要素 | UI要素 | 操作 | 動作 |
| :--- | :--- | :--- | :--- |
| **主語** | 9マスパネルの**中段（2行目）**のマスをクリックする。 | マスをクリックする。 | 1. `subject` のPropsがクリックされたマスに対応する値（例: `first_s`, `third_p`など）に更新される。2. 同じマスを再度クリックすると、同じ人称内で単数と複数が切り替わる(例: `second` ↔ `second_p`)。3. **中段のアクティブなマスと記号**（1, 11, 2, 22, 3, 33）が切り替わる。4. **対応する文章**が生成・表示される。 |

### 4.5. **時制**の選択

| 要素 | UI要素 | 操作 | 動作 |
| :--- | :--- | :--- | :--- |
| **時制** | 9マスパネルの**下段（3行目）**のマスをクリックする。 | マスをクリックする。 | 1. `tense` のPropsがクリックされたマスに対応する値に更新される。2. **下段のアクティブなマス**が切り替わる。3. **対応する文章**が生成・表示される。 |

### 4.6. **動詞**の選択

| 要素 | UI要素 | 操作 | 動作 | 
| :--- | :--- | :--- | :--- |
| **動詞** | `VerbSelector` (プルダウン) | プルダウンから動詞を選択する。 | 1. `verb` のPropsが選択された値に更新される。2. これに基づき、**9マスパネルの表示**が更新される。3. **対応する文章（英文の出だし）**が生成・表示される。 

### 4.6.1. 動詞タイプがDo動詞の場合の選択肢

- `do` (する)
- `live` (住む)
- `go` (行く)
- `arrive` (着く)
- `talk` (話す)
- `run` (走る)
- `walk` (歩く)
- `smile` (笑う)
- `laugh` (笑う)

### 4.6.2. 動詞タイプがBe動詞の場合の選択肢

**代名詞:**
- `something` (何か)

**職業(名詞):**
- `carpenter` (大工)
- `hairdresser` (美容師)
- `nurse` (看護師)
- `teacher` (先生)
- `chef` (シェフ)
- `farmer` (農家)
- `photographer` (写真家)

**形容詞:**
- `happy` (幸せ)
- `sleepy` (眠い)
- `angry` (怒った)
- `tired` (疲れた)
- `fine` (元気)

## 5. 文章生成ロジック

### 5.1. 状態管理

アプリケーションは、以下の**5つ**の要素を合わせた**現在の状態 (Current State)**を保持します。

`Current State` = { `verbType`, `verb`, `sentenceType`, `subject`, `tense` }

### 5.2. 文章生成 (Text Generation)

ユーザーが要素をクリックし、`Current State` が更新されるたびに、システムは保持している**5つ**の状態の組み合わせに基づき、対応する**英文の出だし（文頭パターン）**をデータベースから検索またはロジックで生成し、画面に表示します。

| Current State | 生成される文章の例 |
| :--- | :--- |
| Do, live, Question, Third\_s, Present | **Does he live?** |
| Be, something, Negative, First\_p, Past | **We weren't something.** |
| Do, go, Positive, First\_s, Future | **I will go.** |

### 5.3. 文章の書式設定

生成された英文は、以下のルールで自動的に書式設定されます:

1. **大文字化**: 文頭の最初の文字は常に大文字になります。
2. **句読点**: 文末には適切な句読点が付加されます:
   - 疑問文(`question`)の場合: `?`
   - 肯定文(`positive`)および否定文(`negative`)の場合: `.`

## 6. 実装上の考慮事項

* **状態の初期値とデフォルト:** 練習モード開始時の初期値は以下の通りです:
    * `verbType`: `do`
    * `verb`: `do`
    * `sentenceType`: `positive`
    * `subject`: `first_s`
    * `tense`: `present`
* **動詞タイプ変更時の動詞リセット:** `VerbType`を変更した場合、`verb`の値は以下のルールで自動的にリセットされます:
    * `verbType`が「Do動詞」(`do`)の場合: `verb`は`do`にリセットされる。
    * `verbType`が「Be動詞」(`be`)の場合: `verb`は`something`にリセットされる。
* **主語の切り替え:** 主語のマスをクリックすると、同じ人称内で単数と複数が切り替わります:
    * 二人称: `second` ↔ `second_p`
    * 一人称: `first_s` ↔ `first_p`
    * 三人称: `third_s` ↔ `third_p`

