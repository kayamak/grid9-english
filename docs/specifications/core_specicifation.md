# システム仕様書（コア機能）

## 1. システム概要

### 1.1 システム名称

**Grid9English** (グリッド・ナイン・イングリッシュ)

### 1.2 目的

**動詞の種類（Do/Be）**の選択、主語の**複数形**を含む文頭表現の**パターン**を、**9マスグリッド**と**ピクトグラム**を用いて視覚的かつ直感的に理解・習得することを目的とします。

### 1.3 ターゲット

初級〜中級レベルの英語学習者、特に英文の構造パターン（主語と動詞の組み合わせ）を苦手とする学習者。

---

## 2. システム設計（アーキテクチャ）

### 2.1 構成要素

システムは主に以下のコンポーネントで構成されます。

1. **タブ UI コンポーネント (`VerbSelector`):** 動詞の種類（Do/Be）を切り替えるためのUI。
2. **コア UI コンポーネント (`NineKeyPanel`):** 9マスグリッドを描画し、パターンを表示する中心的なUIコンポーネント。
3. **表示ロジック (Active Cell Logic):** 4つのPropsに基づいて、9マスのうちどのセルをアクティブにするか決定するロジック。

### 2.2 コアデータモデル（パターン）

各英文のパターンは、以下の4つの属性で定義されます。

| 属性名 | 型 | 許容される値 | 説明 |
| :--- | :--- | :--- | :--- |
| **`verbType`** | String | `do`, `be` | 文頭表現が **Do動詞パターン** か **Be動詞パターン** かを決定します。 |
| **`sentenceType`** | String | `positive`, `negative`, `question` | 表現したい文の**形式**（肯定文、否定文、疑問文）を決定します。 |
| **`subject`** | String | `first_s`, `first_p`, `second`, `third_s`, `third_p` | 文の**主語の種類と数**（単数・複数）を厳密に決定します。 |
| **`tense`** | String | `past`, `present`, `future` | 表現したい文の**時制**を決定します。 |

**主語の分類定義とパネル表示記号:**

| Props値 | 対応する代名詞の例 | **パネル上の記号** |
| :--- | :--- | :--- |
| `first_s` (一人称単数) | I | **1** |
| `first_p` (一人称複数) | We | **11** |
| `second` (二人称) | You | **2** |
| `third_s` (三人称単数) | He, She, It | **3** |
| `third_p` (三人称複数) | They | **33** |

---

## 3. コア機能仕様：9マスパネル

### 3.1 9マスパネルの構造とピクトグラム

パネルは3行3列のグリッド形式で構成され、各マスはパターン要素をピクトグラムで表現します。

| 行（要素） | 列1 | 列2 | 列3 |
| :---: | :---: | :---: | :---: |
| **文の種類** (`sentenceType`) | 否定文 (`negative`): $\text{X}$ | 肯定文 (`positive`): $\text{O}$ | 疑問文 (`question`): $\text{?}$ |
| **主語** (`subject`) | 二人称: 2 | 一人称: 1 / 11 | 三人称: 3 / 33 |
| **時制** (`tense`) | 過去形 (`past`): ↩ | 現在形 (`present`): $\text{O}$ | 未来形 (`future`): ↪ |

#### 3.2 コアコンポーネント仕様 (`NineKeyPanel`)

**コンポーネント名:** `NineKeyPanel`

**Props (入力):** 以下の4つのPropsすべてが入力されます。

| Props名 | 型 | 説明 |
| :--- | :--- | :--- |
| `verbType` | String | 動詞タイプ |
| `sentenceType` | String | 文の種類 |
| `subject` | String | 主語の種類と数 |
| `tense` | String | 時制 |

**表示ロジック:**

各マスは、入力されたPropsと一致する場合に**アクティブ**として描画されます。主語のアクティブ判定は以下の通り、記号の表示も単数・複数に応じて厳密に切り替わります。

1. `subject` が `first_s` の場合 $\rightarrow$ **一人称のマス**をアクティブにし、**1** を表示。
2. `subject` が `first_p` の場合 $\rightarrow$ **一人称のマス**をアクティブにし、**11** を表示。
3. `subject` が `second` の場合 $\rightarrow$ **二人称のマス**をアクティブにし、**2** を表示。
4. `subject` が `third_s` の場合 $\rightarrow$ **三人称のマス**をアクティブにし、**3** を表示。
5. `subject` が `third_p` の場合 $\rightarrow$ **三人称のマス**をアクティブにし、**33** を表示。
